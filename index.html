<!DOCTYPE html>
<html lang="vi">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta charset="UTF-8">
<title>Christmas Surprise üéÑ</title>

<style>
body {
    margin: 0;
    height: 100vh;
    background: radial-gradient(circle, #000, #1a1a1a);
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: 'Segoe UI', sans-serif;
    color: white;
    overflow: hidden;
}

/* Tree background */
#bgTree {
    position: fixed;
    bottom: -40px;
    font-size: 650px;
    opacity: 0.15;
    z-index: 1;
    display: none;
}

/* Gift */
#giftBox {
    font-size: 300px;
    cursor: pointer;
    animation: shake 1s infinite;
    z-index: 5;
}
@keyframes shake {
    0% { transform: rotate(0); }
    25% { transform: rotate(6deg); }
    50% { transform: rotate(-6deg); }
    75% { transform: rotate(6deg); }
    100% { transform: rotate(0); }
}

.hidden { display: none; }

/* Countdown */
#countdown {
    position: absolute;
    font-size: 10rem;
    font-weight: 900;
    color: gold;
    text-shadow: 0 0 30px red, 0 0 60px gold;
    animation: zoomShake 1s ease;
    z-index: 20;
}
@keyframes zoomShake {
    0% { transform: scale(0.3); opacity: 0; }
    40% { transform: scale(1.4); opacity: 1; }
    100% { transform: scale(1); }
}
@media (max-width: 768px) {
    #countdown { font-size: 6rem; }
}

/* Content */
#content {
    text-align: center;
    z-index: 5;
    font-size: 2rem;
}
h1 {
    font-size: 3.2rem;
    min-height: 80px;
    text-shadow: 0 0 20px gold;
}

/* Santa */
.santa {
    position: absolute;
    left: -300px;
    font-size: 80px;
    animation: santaMove linear infinite;
    z-index: 6;
}
.santa1 { bottom: 90px; animation-duration: 10s; }
.santa2 { bottom: 160px; animation-duration: 13s; }
@keyframes santaMove { to { left: 120%; } }

/* Snow */
.snow {
    position: absolute;
    top: -10px;
    animation: fall linear infinite;
    z-index: 4;
}
@keyframes fall { to { transform: translateY(110vh); } }

/* Flash */
#flash {
    position: fixed;
    inset: 0;
    background: white;
    opacity: 0;
    pointer-events: none;
    z-index: 10;
}

/* Fireworks */
canvas {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 9;
}
/* iPhone 12 Pro Max */
@media screen and (max-width: 430px) and (max-height: 932px) {

  body {
    padding: 12px;
  }

  /* üéÅ Gift box */
  #giftBox {
    font-size: 180px;
  }

  /* üî¢ Countdown */
  #countdown {
    font-size: 5.5rem;
    text-shadow: 0 0 15px red, 0 0 30px gold;
  }

  /* üéÑ Background tree */
  #bgTree {
    font-size: 360px;
    bottom: -20px;
  }

  /* üíå Text content */
  #content {
    font-size: 1.4rem;
    padding: 0 10px;
  }

  h1 {
    font-size: 2.1rem;
    min-height: 60px;
  }

  /* üéÖ Santa */
  .santa {
    font-size: 48px;
  }

  .santa1 {
    bottom: 70px;
  }

  .santa2 {
    bottom: 120px;
  }

  /* ‚ùÑ Snow */
  .snow {
    font-size: 14px;
  }
}
#typingText {
  white-space: pre-wrap;          /* Cho ph√©p xu·ªëng d√≤ng */
  word-break: break-word;         /* Kh√¥ng tr√†n ngang */
  text-align: center;             /* CƒÉn gi·ªØa */
  max-width: 90vw;                /* Gi·ªõi h·∫°n chi·ªÅu ngang */
  margin: 0 auto;
  line-height: 1.5;
}
@media screen and (max-width: 430px) {

  #typingText {
    font-size: 1.2rem;        /* Nh·ªè h∆°n cho mobile */
    line-height: 1.6;
    letter-spacing: 0.5px;
  }

  h1 {
    font-size: 1.9rem;
  }
}

</style>
</head>

<body>

<audio id="music" src="christmas.mp3" loop></audio>
<audio id="boom" src="boom.mp3"></audio>

<div id="flash"></div>
<canvas id="fireworks"></canvas>

<div id="bgTree">üéÑ</div>
<div id="giftBox" onclick="startSurprise()">üéÅ</div>
<div id="countdown" class="hidden"></div>

<div id="content" class="hidden">
    <h1 id="typingText"></h1>
    <!-- <p>
        Ch√∫c b·∫°n m·ªôt m√πa Gi√°ng Sinh an l√†nh,<br>
        h·∫°nh ph√∫c v√† tr√†n ƒë·∫ßy y√™u th∆∞∆°ng ‚ù§Ô∏è
    </p> -->
</div>

<div class="santa santa1 hidden">üéÖüõ∑ü¶åü¶åü¶å</div>
<div class="santa santa2 hidden">üéÖüõ∑ü¶åü¶åü¶å</div>

<script>
function getNameFromURL() {
  const params = new URLSearchParams(window.location.search);
  return params.get("name") || "You";
}

const name = decodeURIComponent(getNameFromURL());
const heartText = [
  "      Merry Christmas",
  "   Ch√∫c b·∫°n lu√¥n b√¨nh an",
  " Ch√∫c b·∫°n lu√¥n m·ªâm c∆∞·ªùi",
  "  V√† ƒë∆∞·ª£c y√™u th∆∞∆°ng",
  "   Nhi·ªÅu h∆°n m·ªói ng√†y",
  `        ${name}`,
  "            ‚ù§Ô∏è"
];


let index = 0, count = 3;

/* Fireworks */
const canvas = document.getElementById("fireworks");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth;
canvas.height = innerHeight;
let particles = [];

function firework() {
  const x = Math.random()*canvas.width;
  const y = Math.random()*canvas.height/2;
  for(let i=0;i<80;i++){
    particles.push({
      x,y,
      vx:(Math.random()-0.5)*6,
      vy:(Math.random()-0.5)*6,
      a:1,
      c:`hsl(${Math.random()*360},100%,60%)`
    });
  }
}
function animateFW(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  particles.forEach((p,i)=>{
    p.x+=p.vx; p.y+=p.vy; p.a-=0.01;
    ctx.globalAlpha=p.a;
    ctx.fillStyle=p.c;
    ctx.beginPath();
    ctx.arc(p.x,p.y,3,0,Math.PI*2);
    ctx.fill();
    if(p.a<=0) particles.splice(i,1);
  });
  requestAnimationFrame(animateFW);
}
animateFW();

/* Surprise */
function startSurprise(){
  giftBox.classList.add("hidden");
  countdown.classList.remove("hidden");
  countdown.innerText = count;

  const timer = setInterval(()=>{
    count--;
    if(count>0) countdown.innerText = count;
    else{
      clearInterval(timer);
      countdown.classList.add("hidden");
      document.getElementById("boom").play();
      openGift();
    }
  },1000);
}

function openGift(){
  flash.style.opacity=1;
  setTimeout(()=>{
    flash.style.opacity=0;
    bgTree.style.display="block";
    content.classList.remove("hidden");
    document.querySelectorAll(".santa").forEach(s=>s.classList.remove("hidden"));
    music.play();
    snow();
    type();
    for(let i=0;i<5;i++) setTimeout(firework,i*400);
  },300);
}

let line = 0;
let char = 0;

function type() {
  if (line < heartText.length) {
    if (char < heartText[line].length) {
      typingText.innerHTML += heartText[line].charAt(char);
      char++;
      setTimeout(type, 60);
    } else {
      typingText.innerHTML += "<br>";
      char = 0;
      line++;
      setTimeout(type, 200);
    }
  }
}


function snow(){
  for(let i=0;i<80;i++){
    const s=document.createElement("div");
    s.innerHTML="‚ùÑ";
    s.className="snow";
    s.style.left=Math.random()*100+"vw";
    s.style.fontSize=Math.random()*14+10+"px";
    s.style.animationDuration=Math.random()*3+3+"s";
    document.body.appendChild(s);
  }
}
</script>
</body>
</html>
